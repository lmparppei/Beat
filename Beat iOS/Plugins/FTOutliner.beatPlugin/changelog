#v 1.83 (January 24, 2024)

*IMPROVEMENTS:*
* A new *SCENE POPUP* showing a scene's content will appear when hovering the scene in FTOutliner and pressing ALT. Quickly reference a scene without moving there, or click any line inside the popup to scroll the main document to the exact corresponding place.
* Starting with Beat v. 1.998.2. Beat and FTOutliner are now aware of each other's *BONEYARDS*: In FTOutliner, add a Boneyard section from the bottom Outline Menu. Drag and drop scenes into the boneyard to save them for later. Beat will exclude any material in the boneyard when printing the script.
* Some first steps towards making FTOutliner work with Beat's *Novel Writing Mode*:
  - Change to have the outline show number of words rather than lengths in eights when in Novel Mode
  - Fix to correctly show chapters and subchapters as empty if they are

*FIXES:*
* Notes, Beats and Markers now show correctly in the outline view also when on lines that are Sceneheadings, Sections or Synopsis.
* Fixed a bug where dropping scenes at the bottom of the Boneyard would lead to an error.
* Disabled a shortcut that led to a very experimental mode that no one should need to see. Sorry.
* And some unspottable cosmetical changes of the kind that would each warrant their own article on an Apple rumor site if made to a new version of iOS. Because yeah.

#v 1.82 (October 31, 2023)

Another quick maintenance update:

* Fixes an issue where opening FTOutliner from a newly created document would not open with the expected default settings
* Tries to fix an issue where the changelog text (yes, the one you're reading now) would not display on older MacOS versions.
* Fixes some cosmetic issues with the new Scene Manager panel

#v 1.81 (October 29, 2023)

Some maintenance fixes post-release of v 1.8:

* Added icon to open the side panel (bottom left) due not least to Sonoma not allowing plugin to register click at absolute edge of screen (making the slide-in opener rather hard to use). Consequently also removed the slide-in opener from 1.8.
* Reverted nested CSS to regular non-nested CSS for better backwards compatibility (if the scene manager looked broken for you, try it again now!)


#v 1.8 (October 25, 2023)

This release introduces the *ALL NEW SCENE MANAGER* tab in the side panel:

The Scene Manager is a panel that lets you sort and assess your scenes in different ways. It's also a great pre-flight feature, to check spelling and consistency of your sceneheadings before submitting. More info is availabe from the ? button in the panel, but some highlights are:
* Catch suspected typos or almost-matches, to avoid submitting scripts where the same location has unintentional variations (such as HOTEL vs THE HOTEL etc)
* Rename locations, either individually or for all scenes in that location at once
* Find single locations (i.e. those that only appear once) — either before your production office asks you to reduce them, or just in order to find any almost-matches that deviated too much for the fuzzy logic to find for you
* Group scenes per Main Location (HOTEL/ROOM, HOTEL/LOBBY etc sorts under HOTEL) or Scheduling Group (INT or EXT, DAY or NIGHT) to quickly asses the page amount for a location or time

...and more! While this panel may look a bit daunting at first — and while most certainly it is geared more towards scripts close to production than those in the early stages of writing — I hope you'll give it a try! Let me know your reactions — what could be added, what sits so-so with your productions' routines?

*IMPROVEMENTS:* 

* Is the slide-in *SIDE PANEL* too tucked away to be useful? Or had you even discovered that it's there to begin with? It should now be more accessible than before:
  - Rest the mouse at the left end of the screen (if FTOutliner is set up to fill the left half of the screen — otherwise rest at the left edge of the FTOutliner window) and a clickable edge of the side panel will appear. 
  - Close the side panel again by clicking in the same place.
  - In addition to that, the old shortcuts `§` or `\`` (depending on keyboard lanugauge) are of course still available.
* The Menu Bar menu — the one at the top of the screen, next to Beat's own menus — is now behaving well again:
  - Broken commands were reconnected
  - Some shortcut keys were changed due to conflicts
  - Some menu items were rearranged

*BUG FIXES:*

* IMPORTANT FIX to adapt to a new naming convention of windows, where this very dialog would open in the main plugin window too, making the actual plugin unreachable. That should be gone now.
* PAGINATION LINES for orphan text (i.e. text immediately following a section heading, with no scene heading) are now correctly positioned.
* in the DIALOG PANEL, filtering by a specific string now does not look for matches in sceneheadings.
* Worked around a couple of related critical bugs where hidden material may become visible, or the other way around, when dragging and dropping scenes. As a result,
  - when moving scenes, FTOutliner now disallows dropping them next to hidden/omitted scenes. 
  - any hidden scenes immediately following one that you move will now move along with it. 



#v 1.72 (September 10, 2023)

*IMPORTANT HOTFIX* to a serious synchronization issue where quickly decreasing the document's total number of lines caused FTOutliner to crash the main app.

WHILE I WAS ALREADY IN THERE:
* In addition to hovering a beat to show its description (the text after the colon, if present), clicking a beat now shows the descriptions for all beats of that label. 
* In addition to `§`, backtick `\`` should now work as a shortcut for the notepanel. Yes, REALLY.
* Minor visual fixes to the High Contrast mode. 

#v 1.71 (September 7, 2023)

*Post-realease hotfixes:*
* Fix to issue where menu items were not clickable except directly on switch buttons
* Fix to issue where menu items were not instantly greyed-out or un-greyed when they should be
* Duct-tape fix to allow backtick `\`` as shortcut for the slide-in panel for languages where the key below `ESC` is not `§`. The menu will still always display the shortcut as `§` due to javascript keyboard unawareness.

#v 1.7 (September 5, 2023)

*FINALLY*, a looong overdue, much-needed update! Much of the codebase has been rewritten to catch up with the many great additions to the Beat API, and even if most of the changes aren't visible to the eye this should mean a big improvement to stability and speed.

1. Includes the changes of the never-released v 1.60, see changelog below. The big highlight is:
* *PAGE NUMBERS* are now spot on between the Beat document and FTOutliner
  - As a result, there is a now an option in the view menu to have page numbers visible in the margin of the columns. (The page numbers are clickable too, for those meeting situations where someone says "so on page 48" -- just click and you're there. Personally, I keep them on all the time.)
  - Lengths and ranges are now much more reliable as a result, and you can also display total lengths on sections (via Advanced Settings)

2. Tons of under-the-hood changes:
* Completely re-vamped system for updating FTOutliner's timeline. More reliable, less chance of mismatch between document and outline.
* Less communication back and forth between FTOutliner and Beat when it's not needed, with speed gains for both.
* Re-vamped context menu system. Looking almost exactly the same so don't expect anything exciting, but also much more maintainable and expandible. 
* New system for collecting and displaying notes and markers. Again, looking exactly the same, but faster and more reliable.
* Changed how dialog boxes work. More specifically: By opening in a new window instead of divs that may or may not fit within FTOutliner's window size. Currently, this affects the Advanced Settings dialog (and the one you're looking at now) but others will gradually move over too.

3. Additions that are actually somewhat visible to the eye:
* Option when selecting one or more scenes to display their total length in pages in the bottom button row.
* In High Contrast Mode, a slider lets you set the color saturation for scenes from white only to fully colored.
* Option to (temporarily?) show scenes colored by progress instead of assigned scene color. Progress is entered manually by adding a note with a percentage such as [[50%]] anywhere in a scene. 
* Menu Item to report bugs directly through GitHub Issues
* Options to adjust the interaction between main window and plugin:
  - Should you want to, you can set each click to immediately focus the document, allowing you to start writing at once.
  - Should you NOT want that, but you're still a keyboard-centric user and want to switch focus back and forth between FToutliner and document, there is now a keyboard shortcut (ctrl+alt+cmd+SPACE) to do that.
  - FTOutliner is easier to use keyboard-only: Walk scenes with arrow keys, hit ENTER to open context menu at selected scene, use keys in context menu. (This will gradually happen for the menus at the bottom as well. They can already be opened with F1, but not selected using keys.)
* To add new scenes or sections from directly within the outline, instead of holding ALT (which annoyingly made buttons appear and scenes shift around when you held ALT for other reasons) adding new content is now done from the right click (context) menu.
* The same goes for increasing and decreasing the level of sections, which is done via the context menu too. 
* Lots of minor tweaks, visual and otherwise. I hope I got everything right.

4. Known Issues:
* For now, omitting (hiding) scenes from within FTOutliner has been disabled. FTOutliner's old logic was not really reliable, and until it is, I don't think we should use it. So there.
* There will be bugs. See below.

5. Bugfixes:
* The bugfixes are too many to mention, many of them never fixed per se but rather just not there anymore after rewriting the context where they appeared.
* On the flip side, I'm sure I have introduced new ones. Please do report whatever you run into -- I have been using FTOutliner daily for my day job during development and find it more stable than ever, but for every new user there will be new ways to work. So please help me catch the stuff I didn't foresee.


#v 1.60 (never released)

This is mainly an update to bring FTOutliner up to speed with Beat's new pagination system.
But *WHAT A PAGINATION SYSTEM* that is! Thanks to Lauri-Matti for your hard work (and for explaining very patiently how to use it).

This means that page numbers in FTOutliner now matches those in Beat (and the final print) as good as 1:1, in places like
* page numbers on sections
* page numbers at the bottom of acts
* forced pagebreaks, which now appears as jagged edges where the break occurs (followed by uncolored space to represent the blank page area below)
* As a result, PAGE DIVIDERS have been moved from their hidden spot inside the Advanced Settings to the VIEW MENU instead: All pagination for your screenplay can be shown in the margin of each column. 

*FIXES AND ENHANCMENTSENTSETNS:*

* NOTES AND MARKERS both now accepts any color that Beat accepts -- Beat's base palette, plus any HEX number. In addition, FTOutliner can display a note with any HTML color name (such as hotpink or gold), although those will only be shown with the default note color in Beat itself
* For NOTES IN THE NOTEPANEL, a trashcan button now appears when hovering to allow deleting notes from there too
* There is also much less risk that deleting a note will delete the note + VAT. Enough is enough.

*ONE LITTLE ADDITION:* 
* Added advanced setting to optionally show the length of a section in the section header next to its starting page nuber. For those who'd want that.

*BUG FIXES:*
* Fixed a bug where dragging multiple objects of the same type resulted in a dialog saying you can only drag objects of the same type. Which you were already doing. No more of that nonsense.



#v 1.54 (February 28, 2023)

*A GENERAL NOTE ABOUT MACOS (or rather Safari, or rather Webkit) COMPATIBILITY:* 
* Since a few updates back, FTOutliner needs at least WebKit version 613.1.17 to run properly. This means you need to have Safari 15.4 or higher installed, which is comapatible as far back as MacOs Catalina (10.15). There is now a warning on startup letting you know if your webkit version is too old, as some very odd behavior has been reported in older versions. I apologize if this means breaking compatibility with some systems.

*NEW FEATURES*
* The Notepanel is now the SIDEPANEL. Oh? So what? Well, so now it has two tabs, one of which is the old Notepanel, and one of which is...:
  - The new DIALOG PANEL will let you display all dialog for ANY character (while also indicating the corresponding scene in the outline) ...
  - ...or, alternatively, the dialog for ALL characters in one long list. 
  - Enter text in the SEARCH field to find some term, word, name or why not (V.O.) to find all voice-overs in a script.
* APP-WIDE shortcuts now let you access some FTOutliner menu items without focusing FTOutliner first: 
  - Switch view, cycle notes, or browse all dialog for the current character directly as you type
  - All FTOutliner-specific shortcuts have CTRL + ALT modifier keys
  - This currently DOES NOT replace the in-plugin modifier-less shortcuts, but rather acts as a complement. 

*IMPROVEMENTS*
* Dragging and dropping now also allows COPYING -- hold down ALT while dragging and the original object will stay after dropping, creating a duplicate in the new position
* A range of synopsis can now be selected via shift-clicking the last one in the desired range, just like with scenes
* Two additions to the ADVANCED SETTINGS now lets you 
  - automatically widen columns of index card currently being edited
  - allow index cards of widened columns to be tall enough to show all text inside it

*MINOR IMPROVEMENTS*
* If a note starts with ? or ! for coloring purposes it will not show in the hovered/listed note
* Notes will now show with correct italics or bold instead of asterisks when cycled and in the notepanel

*BUGS:*
* Fixed a crash that could occur upon returning to FTOutliner after unfocusing it while ALT was pressed
* Fixed a crash that could occur when double-clicking-to-edit right at the end of a synopsis
* Added Error message instead of crash when trying to drag element of different types at once
* Fixed a bug when using < or > caused scene headings or section names to display incorrectly
* Fixed a bug where multiple line section headings would not show if empty or containing spaces only
* Fixed a bug where selecting Cycle Notes from the Note Menu didn't cycles notes at all
* Fixed a graphical glitch in Fixed Mode where synopsis in scenes did not appear even if set to do so
* Fixed a graphical glitch in Fixed Mode where the buttons for Promote/Demote and Add Scene/Section would appear before their synopsis
* Fixed other minor cosmetic stuff


#v 1.53 (January 24, 2023)

*1. FREEFORM SYNOPSIS EDITING* is now also available in FIXED MODE:

* When synopsis are set to show (toggle with Y) hovering a scene or section with no synopsis will show an option to double-click to add a first synopsis.
* Already present synopsis can be doubleclicked and edited (along with all other synopsis of that scene/section, as one long free text)
* Dragging and dropping is available to since before.
This means that functionality wise, Fixed View is almost identical to the Index Card View. The difference lies in visual presentation, where the index cards have fixed sizes regardless of content, but the Fixed view will adjust to fit no more, no less, than the synopsis within them. Which is best? You be the judge. (And yes, you may once again argue this makes the Fixed View the most flexible. I once again pretend I didn't hear that.)

*2.* An *ADVANCED SETTINGS* dialog has been added, available from the settings menu or using CMD + comma, with a couple of more specific but no less useful features:  
* OPTIONALLY SHOW MULTIPLE LINES for sceneheadings and sections. This is available throug the ADVANCED SETTINGS, a new dialog 
  - Multiple Lines works across all three views. 
  - For all views, areas will grow to accomodate the entire text -- with the exception of SCENES in Flexible View, which will hode whatever doesn't fits inside the size of the scene.
  - As a side effect, EDITING SCENE/SECTION HEADINGS within the outline (and in any view) will always show multiple lines during editing.
* Option to show SECTION HEADERS AS TYPED rather than forced to all caps as was preivously the case.
* Option to show PAGE GUIDES, showing the (approximate) position of page numbers. 
  - These can be set to always show, or just when hovering an act
  - Page numbers can be clicked, taking you (quasi-reliably) to the corresponding pagebreak in the script. IDEAL for those "I have a note on page 36" situations.

* Option to show VERTICAL BARS for sections in the Index Card View, making hierarchical levels clearer just like in Fixed and Flexible views. Not saying you should, only that you can.

*3. OTHER IMPROVEMENTS:*
* Adjustments to adding new synopsis in Fixed and Index Card Views: synopsis area for scenes/sections without present synopsis is hidden/collapsed by default and will appear when hovering the scene's/section's heading. (In Index Card View, this relates ony to #ACTS, and to ##SECTIONS with the color "special"). This sounds complicated but is quite straightforward.
* Improvements to visual feedback and ease-of-use when using the ALT key to add new elements in the outline
* Adding a new section using a section's add buttons now adds a section of the same level
* A bunch of cosmetical fixes and some long overdue sanitizing of the CSS, especially to the HIGH CONTRAST mode. Please report any errors if something turns out unreadable.

*4. BUG FIXES:* 
* Fixed an error when cycling notes using the TAB key if no notes or reviews were present in the document
* Fixed a bug when dropping a section below an #ACT header, making the dropped section end up in the wrong place.
* Fixed a bug when deleting a ##SECTION header that was fully or partly hidden (using /* */) could produce undexpected results
* Fixed a bug where orphan text (i.e. text that sits directly under a ###Section, with no scene heading) could under throw an error under certain circumtances


#v 1.52 (January 9, 2023)

Hotfix to version number format that stopped the update mechanism 


#v 1.51 (January 7, 2023)

Hotfix for bug when drag-and-dropping an #ACT at the absolute end of the script to be inserted in the wrong place.


#v 1.5 (January 5, 2023)

*NEW FEATURES AND IMPROVEMENTS:*

* BIG CHANGE TO EDITING INDEX CARDS: 
  - In index card mode, you can now FREELY EDIT ALL OF THE SYNOPSIS on a card -- not just one by one as before. Double click the synopsis area of the index card to enter edit mode -- and all synopses already present on it will turn into one single text where you can add new lines, merge existing ones, or edit what's there. 
  - When you exit the index card (ESC to discard changes, CMD + ENTER to save them) the contents of the index card will be parsed into individual synopsis again, one for each new line. FToutliner will even do its best to retain the synopsis' positions in the screenplay text, if any is present in the scene/section.
  - This means that once out of edit mode, synopsis can still be dragged-and-dropped individually between or within cards
  - This may sound like nothing special, but if you like to use the index card mode for outlining (or if you didn't until now because it was clunky) I'm quite certain you will find this a massive improvement! I do, for sure.

* SECTIONS can now be PROMOTED/DENOTED directly in the index card view. Hold ALT when hovering a section, and left/right pointing arrows will appear. Clicking them will increase or decrease its level (i.e. number of # hashtags).
  - NOTE that in order to not mess up the structure by mistake, a ##SECTION can not be demoted to a one-hashtag #SECTION, which would turn it into its own column. For now, turning sections into #ACTS (or acts into lower-level sections) will have to be done in the document itself.

* MARKERS can now be named and will display text (in proportional mode only, it won't fit elsewhere). In Beat, enter the marker as usual, then a colon and some description -- like [[marker yellow: Luke meets Yoda]] or [[marker red: not done!]] or [[maker darkgoldenrod: rewrite this scene without the necktie]]. (Any html color name works here, by the way.)
  - The display of marker names, should you want to display markers without the text, can be toggled with CTRL + m. 
  - Minor cosmetical fixes to markers in general.

* DRAGGING ENTIRE #ACTS will now provide better visual feedback, with a vertical insertion point between (or before/after) existing acts. As a result, moving an act does not allow you to split existing acts, only to drop them in between, avoiding unpredictable results. Thanks @folkemunne for feedback.

* In the Flexible and Fixed views, scene headings can now span more than one line. In Fixed, scenes will grow to accommodate the entire scene heading as needed, while Flexible will show as much as will fit given the length-based size. (You may argue that this makes the Fixed view more flexible than Flexible. I will pretend I didn't hear that.) Togglable with CTRL+S or via the Show menu.

* NOTES (and markers) used to be invisible if entered BEFORE the first #ACT element. Not any more. They now get their own little mini-column to the left of everything else.

* Finally, FTOutliner now conforms to Beat's new synopsis model. Which hopefully will mean nothing when using FTOutliner per se. Other than that they work again, after some time of not.


*BUG FIXES:*

* Fixed an instance where deleting notes from the wastebin icon could also delete one empty adjacent line too many
* Fixed a crash when cycling notes with TAB key if document had no review entries. 
* Fixed positioning of the Add scene/section button, which could previously be pushed off-screen when the note panel was open

* Fixed an error that could occur when moving scenes to the top of the first column if it were not a named act
* Fixed a benign but annoying error message that could occur when moving the very last scene to somewhere else in the script
* Fixed a bunch of other errors relating to notes, markers and other stuff if put before the first named act
* Fixed "All Notes to New Doc" command, so that in the new doc [[ and ]] are stripped out from notes (previously, notes would still be interpreted as notes in the new doc and thus not print -- making the note summary quite useless.)



#v 1.44 (september 24, 2022)

*NEW FEATURES AND IMPROVEMENTS:*

1. NOTES and REVIEWS

* REVIEWS (as created in Beat using cmd+R) can now be displayed in FTOutliner just like notes and markers. Toggle with R.
* Pressing TAB in FTOutliner now cycles NOTES, or REVIEWS, or BOTH depending on what is currently set to display.
* The NOTEPANEL now allows ticking/unticking notes per COLOR should you want to display a subset only
* That same NOTEPANEL now also shows REVIEWS. If you tick them.
* And you can resize that same NOTEPANEL to the width of your liking. 
* Enough with the NOTEPANEL.
* And finally, there are two new menu commands to CREATE A NEW DOCUMENT with a list of all NOTES or REVIEWS compiled from the current screenplay.

2. FORCED PAGE BREAKS

* If the document has FORCED PAGEBREAKS, they are now visually represented in the Flexible View as jagged scene ends, rendering the empty space as empty rather than as if it were written scene material.
* Scenes with manual page breaks will now have their lengths-in-eights measured based on the actual written scene, excluding any white empty trailing page. 
* Scenes with forced page breaks now also have their heights more correctly calculated.

3. REVISIONS

* REVISIONS can now be displayed in the outline. Revised lines will be shown as overlaid blocks in the coreresponding revision color. Toggle with * (no menu item connected yet -- for now it's shortcut key-only).

*FURTHER CHANGES*

* The R shortcut key for toggling Real Time Updating has been removed (it now toggles Reviews instead). The menu item is still available under the settings menu, although most likely, FTOutliner (and Beat itself) has overcome the issues that made Beat too slow on certain machines. 

*BUG FIXES AND IMPROVEMENTS*

* Material before the first #ACT -- i.e. when there's a first column without an act title -- used to not have a page count displayed at the bottom. It now does.
* When editing a synopsis, hitting return with no text entered now deletes the synopsis altogether. It's been leaving an orphan = behind for a while, which, well, you know. Wasn't intentional.  
* Fixed a bug that would crash FTOutliner if a note was hovered while editing a synopsis, sceneheading or section.
* Fixed long-standing bug (you should have told me!) which produced an error alert when deleting or omitting the last scene in script. 
* And finally almost fixed how FTOutliner handles document titles for the window title bar and/or headlines for print. Basically, if you don't have a title page, what you enter in the title dialog rules. If there's text in both places, what you entered/edited last will have precedence. But most of all, I hope we won't be seing any crashes due to this again. Or printouts that claim your script is called FALSE.  


#v 1.43 (Aug 28, 2022)

*IMPROVEMENTS:*

1. Character Tracking

* FToutliner now correctly recognizes names in action paragraphs also when they have uppercase letters inside of them, such as McArthur or Jean-Paul or King of Rock-n-Roll.
* Ftoutliner can now also highlight scenes where a characters is mentioned in a synopsis -- useful when outlining in Index Card Mode (although do note that to be recognized as a character, every name must have a speech somewhere in the document.) This can be toggled in the Tracking Menu.
* Finally, FToutliner can now skip occurences of a name when it talks in (V.O.) or (PRELAP) only, and thus probably not actually present in the scene. This can be toggled in the Tracking Menu.

2. High Contrast Mode 

* Added a HIGH CONTRAST MODE, accessible from the View Menu (or shortcut H). With it, the use of colors is reduced to a minimum. Used in tandem with All Colors To Grey you'll get a very black-on-white version of FTOutliner indeed.

3. Some More Things

* PINNING AN ACT allows you to make any act column WIDER than the others (most useful in Index Card Mode, if you want to see more of the act you're working with -- but it's there in the other views too). Click the pin icon that appears when hovering an ACT HEADER, or press Q and SHIFT + Q to pin the next/previous act. Unpin again by clicking the pin icon, hitting Escape, or cycling through all columns with Q to the end.
* Also changed two (three) behaviors while editing a synopsis to allow seeing more text at once: 
  - the affected act column now automatically gets pinned (i.e. wider than the others). Most useful in Index Card mode but applies to all views.
  - if needed, the affected index card automatically resizes to fit its entire content. Applies to Index Card mode only.
  - index cards that are not being edited will be slightly dimmed (requires Safari 15.4)
* Changed behavior when editing text (double-clicking a synopsis, sceneheading or section) that the text's initial state is now selected
* Added cmd+backspace shortcut to delete currently selected synopsis/scene/section element(s) wihtout opening the context menu
* Added ability to hide the sceneheading when displaying inline synopsis in flexible or non-proportional modes
* Added button when opening FTOutliner without outline elements in the main document, offering to preopulate the document with some acts and sequences to start off with 
* Improvements to filtering by color, especially in Index Card View where section cards and synopsis now behave as expected

*BUG FIXES:*

* Fixed a bug in Index Card Mode that would change what sections/scenes were expanded/collapsed after editing text
* Fixed a bug when switching to Flexible from any other view, whereby sections with orphan text would not immediately be given their appropriate height
* Fixed a bug whereby deleting all scenes and sections in a document would crash FTOutliner instead of going back to the welcome screen
* Fixed annoying behavior that if clicking (selecting) a synopsis some distance down inside an index card, the card would scroll back to the top so that the selected synopsis disappeared out of view.
* Fixed a bug whereby moving a synopsis out of a (then empty) section could cause the section to become a synopsis. 
* Fixed a rare but quite impairing memory leak that happened if hitting keyboard shortcut (number) for character tracking in document where no characters had yet been added
* Other minor bug fixes.

*OTHER STUFF:*

* Minor fixes to UI colors
* Minor changes to names of menus and menu commands
* Spent some time in the sun. That was nice.

*A GENERAL NOTE:*

This version of FTOutliner makes use of the :(has) CSS selector, which means that some visual components will look better if you have upgraded Safari to version 15.4 or later. Safari 15.4 is available for MacOS Catalina or later. Do it if you can.


#v 1.42 (June 9, 2022)

The post-release, how-did-I-not-notice-that update:

*BUG FIXES:*

* Fixed a bug that if the first section element was not a one-hashtag #ACT, every new section would start its own column until an #ACT was encountered
* Fixed logic that incorrectly prevented dragging scenes or sequences into acts before the beginning of its first following lower-level section.
* Added logic to prevent entire #acts from being dragged into the boneyard, since this would in effect convert the boneyard into a normal act.
* Fixed a bug whereby some screenplay text might under certain circumstances be included in a bug report.
* Fixed a bug whereby using the ADD button to add a section at the absolute end of a document might cause Beat to freeze
* Removed shortcut from the Force Restart menu item. It was never supposed be easily triggered (and also used a very local character, so frustrating for most people anyway had they wanted to)

*OTHER STUFF:*

* Added Version History menu item. You probably know, that's probably how you're reading this right now.


#v 1.41 (May 24, 2022)

HOTFIX: If a script document started with anything other than a #Section, FTOutliner would throw an error and have to be restarted (at which point it would probably throw a new error because there probably still was no #section there). That wasn't very ideal. So now that's fixed.


#v 1.4 (May 21, 2022)

First of all, a bug correction to life itself: Turns out that the email address for error reporting has been down for a while. If anyone experienced problems due to this, my sincerest apologies. It is now fixed, and for any questions, bugs, or occasional undeserved praise, ftoutliner@eviltomato.com is once again the address to use!

With that taken care of, today marks the release of a quite substantial rewrite of FTOutliner. It's so substantial that I decided to skip a number and call it 1.4. It's my plugin, I can do that. Anyway, here goes:

*NEW FEATURES:*

* PERHAPS BOTH MOST AND LEAST IMPORTANT: A NEW MENU INTERFACE

  - Commands are now collected in menus, more logically grouped and also with more commands available without remembering a keyboard shortcut. Unless you want to, in which case that still works. You'll find the shortcuts in the menus.
  - Cycle the menus with F1 in case you want to use them but still don't want to take your fingers off the keyboard. We're all different.
  - Oh, and if your system is set to dark mode, menus and dialogs of FTOutliner will follow suite.

* the NOTE PANEL is a slide-in panel to show a list of all notes in the document. 
   
  - Open it from the Note Menu, or by pressing §

* the BONEYARD is a special column where you can drag scenes and sequences you don't know where to put.

  - Add a Boneyard act from the Outline Menu (shortcut CMD + B)
  - Hide/show the Boneyard by clicking it, or using the same shortcut CMD + B once a Boneyard is present

  You can also create your boneyard manually by adding a one-hashtag #ACT at the end of your script and naming it Boneyard, because that's what FTOutliner does when you hit CMD + B. 
  The Boneyard act then changes behavior into a collapsible area that is visually different from the rest of your structure.

  NOTE: Admittedly, this is more of a hack than an actual feature. An actual Boneyard feature would let you store material that would then not print/export together with the non-boneyard stuff.
  Since the Boneyard isn't recognized by Beat itself, whatever you store there will still be considered part of your script and will print with the document.
  So consider the boneyard a storage place for scenes as you work -- still in the document, but visually separated or even hidden from view -- but make sure to manually delete or hide them before distributing.

  (Also, the Boneyard only works in multi-column mode. In one-column mode it just sits like an act at the bottom.)

* QUITE MASSIVE revision to the INDEX CARD feature:

  - ONE SINGLE MODE:
    - Instead of the two index card modes from before (sections or scenes) there is now only one index card mode. 
    - In INDEX CARD MODE, you can now choose to display scenes or sequences independently -- effective emulating either of the two previous modes -- but also anything in between:
    - a. collapsing all scene cards into dots will let you focus on section cards only
    - b. collapsing all section cards into single lines will let you focus on scene cards only
    - c. independently expanding the scenes for any section, or the section card for any group of scenes, or anything in between, lets you seamlessly concentrate on any level as you work
    - d. this sounds complicated. It's not. 
    
    - Shortcut E will alternately expand or collapse all scene cards at once. 
    - Shortcut D will alternately expand or collapse all section cards at once. 
    - The triangle to the left of scenes, and icon in top corner of sections, will toggle that scene group or section card only.

  - EDIT, REARRANGE AND ADD NEW INDEX CARDS -- ALL IN THE FTOUTLINER WINDOW
    ~ Drag and drop to rearrange sequences, scenes, or individual synopsises.
    - Synopsis can be edited by double-clicking a synopsis in an index card (names of scenes and sections too, since some versions back)
    - New synopsis can be added by double-clicking the empty area in an index card
    - New index cards (scene or section) can be added directly below any card by holding ALT and selecting the plus button that appears

  *RESIZING*
  
  - Resizing index cards now increases/decreases the number of lines shown, rather than changing it based on aspect ratio as before. This makes zooming in index more predictable and actually useful.

  *SO WHAT'S THE POINT WITH ALL THIS THEN? *
  
  The idea, should you want to, is that you can now use index cards to outline your story from scratch -- all inside of FTOoutliner. Create cards and write directly into them, on a full-screen index card "board", knowing that everything will be stored as fountain text in your Beat document as you work. 
  This allows you to switch over to normal outline mode at any time -- with FTOutliner next to the normal Beat workspace -- when you feel that you're done using index cards and want to start writing in the document. (But you can of course return to index card mode again should you need to go back to the drawing board and restructure your ideas.)


*OTHER IMPROVEMENTS:*

* DRAGGING-AND-DROPPING has been redesigned and rewritten. It is much more intuitive, much more responsive, and much more reliable. So, yeah.

* NOTES will now show up in FTOutliner even if not on their own line. As a side effect, this also holds true for inline markers and beats (which is a new thing -- see below).
* NOTES can also take on alternate COLORS when displayed in the outline. Default is yellow, but start your note with !, !! or !!! to have it colored in red, purple and magenta. Start with a ? to have it colored green.

* Scenes and sections will now show in color also if you set an arbitrary HEX color. (Hex colors must be set manually by typing in the editor. But still.)
* Using the BEAT color scheme now matches the main app much better, for as seamless an experience as possible:
  - The background is darker, closer to Beat's own sidebar
  - Text on darker colors will have white text to improve legibility
  - The white text thing works in the FTOutliner color scheme too, if you should set some dark HEX color.

* You can EXPAND and COLLAPSE sequences (i.e. show/hide scenes of sections) in non-proportional mode very much like in index card mode.
    - The shortcut is the same as in Index Card mode: Use triangle, or E to toggle ALL scenes between expanded/collapsed.

* Things we may want to set differently for different documents -- view modes, what data to display, and not least the current window position -- are now saved as document defaults rather than plugin defaults. 

* Massive behind-the-scenes rewrite of the outline building code -- allowing for much greater reliability, speed and (which at least makes me a bit happier) easier maintenance. Some of the corrected bugs below wouldn't even have happened with this code to begin with. Hopefully I didn't introduce too many new ones instead. 

* Further improvements to typing speed in sceneheadings and synopsis elements
* Further improvements to speed when selecting colors for scenes, as well as omitting/unomitting from the context menu
* Fixed a bug that would stop scenes from being (re)drawn with flexible heights under certain circumstances
* Fixed a bug whereby adding screenplay text immediately after the first #act element would force a restart of the plugin
* Fixed a bug whereby adding a synopsis at the absolute top of the document would cause a fatal error
* Fixed a bug whereby editing the content of a scene or section would throw an error if the original text included a quotation mark
* Fixed a bug whereby editing the content of a scene or section from the outline could be locked in editing mode if trying to exit by clicking outside


*WORK IN PROGRESS:*

This version contains a few features that are still work in progress. But isn't it the cool thing to do now, to include them in the release anyway and call them beta? 
Well, here goes. The features below will need further testing, so use with caution and expect changes to behavior in upcoming releases. 

* Work in progress: BEATS
  I'm actually semi-hesitant as to whether this is indeed a useful feature, but here it is anyway. It's most likely not very useful when writing, but could potentielly work when communicating to others where some certain beats of some certain story arc take place in the screenplay.
    - To mark the Beats of certain storyline, enter a note with the keyword beat and the name of a storyline: [[beat time travel]]
    - Press B to toggle the display of all beats in the script
    - Beats with the same storyline name will automatically have the same color
    - Hover a beat to display a dashed line combining all beats of the hovered storyline
  Use with care, let me know if you find any use cases for it.
  
* Work in progress: Export outline as HTML. This is extremely bare-bones and probably not useful just yet. But wait and see.


#v 1.23 (feb 18, 2022)

* HOTFIX to solve shortcut key combination for English keyboards. In addition to CMD + PLUS, which still works, FTOutliner now also listens for CMD + EQUAL


#v 1.22 (feb 11, 2022)

* HOTFIX to solve issue with sluggish behavior when typing in Sceneheadings or Synopsis.


#v 1.2 (jan 25, 2022)

*NEW FEATURES:*

* EXPORT OUTLINE TO PDF/PRINT. 
  - Click the print button or press CMD + P to open the print dialog. 
  - The first time you print an outline, FToutliner will try to collect any script title, writer name and other info (like episode number etc) from the title page. You will be offered to change it before printing.
  - To manually enter/change those data, hold ALT to turn the printer icon into a tag icon and click it.
  - LIMITATION: Printing only works with flexible and non-flexible outline modes. Printing index cards is not supported yet.

* HIGHLIGHT SCENES OF CERTAIN COLOR. 
  - ALT + click on a scene to dim all other scene colors (e.g. display only all red scenes)
  - Alternatively, click the funnel to open the tracking dialog and choose a color in the dropdown
  - Add more colors to display by ALT + SHIFT + clicking on scene with another color
  - Hit Esc (or ALT + click anywhere again) to return to normal.

* SELECTION TO NEW DOC
  Context menu item to create a new document populated with the contents of any scenes selected in the outline.
  Example workflow to print all scenes of specific color:
    - ALT-click a colored scene to dim scenes of all other colors
    - press CMD + A to select all non-dimmed scenes
    - right-click (or CTRL + click) on a selected scene to invoke the context menu

*IMPORTANT BUG FIX:*

* Fixed a serious issue where repeatedly moving scenes or sequences with synopsis might move contents of next scene with it (effectively breaking it in two). This logic has now been completely rewritten. 

*SMALLER CHANGES AND BUG FIXES:*

* IMPROVEMENT: Text that are not part of a scene -- i.e. immediately following a section header, without any preceding sceneheading -- will now be reflected in the outline (as their own type of striped quasi-scenes)
* IMPROVEMENT: Markers are recognized even if they contain information after the MARKER COLOR beginning. This way, a marker can read [[MARKER RED: Must rewrite this scene without animals]] and convey the reason the marker is there to begin with. (Note: This is not supported by Beat itself, so if you depend on markers in the document scrollbar do not use this.)
* Improved ways to resize index card heights through toolbar buttons and new keyboard shortcuts to avoid conflict with US keyboards
* Improved parsing logic when moving scenes and sequences
* Improved parsing of notes and markers
* Clicking an element in the outline will now make its heading blink briefly in the editor window for quicker identification
* When initiating a drag to move elements in the outline, the text-to-be-moved will be identified in the editor by temporarily selecting it
* Temporary/partial fix to avoid error when filtering by character, and the character is in a scene which is both omitted AND has a forced scene number 
  (Known issue: Omitted scenes with NO forced scene number, OR scenes with empty scene numbers, will currently still fail to identify the character as present)
* Other fixes to filtering by character: @ before name is disregarded, character name on a hidden/omitted line does not count as present
* Major improvement to reliability in pagecount 
* Fixed a very rare bug that could cause a scene to be displayed with the wrong height
* Fixed a bug that would create an error message when trying to delete a document's last scene from the context menu
* Implemented Beat's new tabbing methods (v 1.929) so that CTRL + Tab and CTRL + SHIFT + Tab switches between tabs in the main window (and with FTOutliner switching along with it)
* Conformed app description data to the new plugin manager
* Cosmetic fixes

* Added undocumented feature (unless you made it all the way down here in this document, but who does?) to display Synopsis inside scenes in normal outline view. When flexible mode is on, Synopsis are shown to the extent that they fit inside the scene box. When off (i.e. in non-proportional mode) scenes actually grow to show the entire synopsis. To toggle this, hit Y for sYnopsis.
* Also added undocumented feature (again meaning not mentioned anywhere else but here) to temporarily toggle off the display of all colors for scenes and sequences. Meant to clearly isolate notes and markers, in case they become drowned out by a busy coloring scheme. Togglable with CTRL + C.


#v 1.11 (nov 19, 2021)  

* Minor cosmetical fixes for older versions of MacOS and to make scrollbars less obtrusive
* Fixed an bug that would display an error if making repeated rapid changes to outline elements


#v 1.10 (nov 18, 2021) 

*NEW FEATURES:*

* SHOW SCRIPT NOTES. Show any full-line [[script notes]] in the outline, positioned relative to their place in the script. (This excludes notes that are inline, i.e. part of an element with actual script text. Multi-line notes are accepted to.)
  Some tips:
  - Toggle the display of notes by hitting "N" or checking/unchecking the corresponding checkbox in settings.
  - Hover a note to see its contents; scroll the script window to a note's position by clicking it.
  - Alternatively, TAB key will cycle through all notes one by one to show their contents.
  - When cycling notes with TAB, the open note remains sticky until you click elsewhere -- and also, a trashcan icon at the top of the note lets you delete it right from there.

* SHOW MARKERS. Any markers in your script as indicated by [[marker color]] will show up as little flags in their appropriate places in your script. Click them to jump directly to that spot. One tip and one caveat:
  - Toggle the display of markers with "M"
  - For now, only full-line markers are recognized. As with notes, in-line markers (i.e. in the middle of a piece of dialogue or action) will not show up.

* MOVE SCENES. Drag-and-drop to re-arrange single scenes, ranges of scenes, or entire sections along with their contents.

* INDEX CARD VIEWS. If you like to outline with 3x5 format cards, there are now two views to allow you to do that: Either with each card representing a SCENE (with any scene-level synopsis visible inside it) or with each card representing a SECTION (with any section-level synopsis visible inside it). Use the "X" key (for IndeX) to cycle to the SCENE index card view to SECTION and back to the normal outline.

* OMIT and UN-OMIT one or more scenes directly via the context menu. 

* DELETE one or more scenes directly from the context menu. You will be warned when you do. But still. Be careful. 

* CHANGE THE FONT SIZE. The plugin's font size can now be increased (cmd + pluskey) or decreased (cmd + minuskey). Reset with cmd + 0. 

* DOUBLE-CLICK a scene or sequence to edit its name (heading) directly in the outline. Admittedly, this may be less effecient than just clicking the scene to jump there and then editing the heading in the script, but it paves the way for future things. Stay tuned.

A NOTE: With this update, FTOutliner will for the first time will be able to make significant changes to the contents of your script. Great care has been taken to test and make sure that FTOutliner does not break anything in your text, but please doublecheck that any changes you do actually end up the way you intended and please report if anything seems incorrect. 
On the bright side, you WILL be able to undo any changes if something doesn't end up the way you wanted it to. Thanks to the fact that Beat listens for (some) shortcuts even when a plugin is in focus, you can do this immediately by pressing cmd+z without switching to the main window, should you want to.

*SMALLER CHANGES:*

* RESPONSIVENESS HAS BEEN MUCH IMPROVED, especially when typing around or in outline elements such as scene headings, sections or synopsis.

* IMPROVEMENT: In modes where not all scenes fit onto the screen at once, typing or clickling a scene in the Beat window will have it scroll into view in FTOutliner if it wasn't already
* IMPROVEMENT: Dimmed scenes are now not dimming child elements. Which is a convoluted way to say that the you-are-here indicator will now show brightly everywhere in the script including in scenes that are dimmed by character tracking.
* IMPROVEMENT: Omitted scenes in a script no longer breaks everything. Instead, they will show as un-numbered, striped-out scenes in Non-Flexible mode, while remaining invisible in Flexible mode (as they are in fact disabled and thus do not take up any time/pagespace anyway)
* IMPROVEMENT: Locked scene numbers (e.g. #44A#) will also not break stuff anymore. Instead, if FTOutliner is set to show scene numbers, locked scenes will be marked with a padlock icon.
* IMPROVEMENT: Previously, FTOutliner behaved badly when a scene had a synopsis present anywhere but immediately following the scene hading. This has now been improved. 

* FIX: A # character inside a section name (e.g. #ACT #2) will not be counted as a leading # and thus not increase the section level anymore.
* FiX: An empty screenplay document will not cause an error anymore but make FTOutliner display a welcome message. 
* FIX: Temporary workaround to allow apostrophes in a character name (e.g. LINN'S DAD) without breaking character tracking
* FIX: Scenes that are too small to show their sceneheading will now sport a better popup with the slugline info when hovered, while scenes that do have their heading written out will have no popup at all because why would they. 
* FIX: Hitting ESC with context menu open now closes the menu rather than the entire plugin
* FIX: A bunch of internal changes because hey. You live and you learn.

* CHANGE: Clicking a scene will not only scroll to that place, but the scene is now also selected in the plugin view. It will be deselected again as soon as focus is moved from the plugin to the document, but helps with the UX logic when selecting a range of scenes.
* CHANGE: The "special" color option in the context menu now only shows in the context menu when a sequence is selected. The "special" color means nothing to Beat, but is shown in FTOutliner as a transparent sequence, pretty much like an act but *without* starting a new column. This is useful for special dividers inside acts, such as ##NEW DAY or whatever other reason you might have for wanting a visual spacer.
* CHANGE: FTOutliner will now ask before closing. 


#v 1.01 (July 29, 2021)

* FIX: If screenplay does not start with an #ACT, scenes and ##sequences before any #ACT will now be stacked vertically too
* IMPROVEMENT: Character list updates every time the Tracking dialog is opened, with any character already currently selected for tracking automatically reselected.


#v 1.0 (July 27, 2021)

Initial release